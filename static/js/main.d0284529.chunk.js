(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),i=n.n(c),s=(n(17),n(1)),o=n.n(s),u=n(2),l=n(5),p=n(3),f=n(4),h=n(7),y=n(6),b=n(8);n(19);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={isChecked:!1},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.playlist,n=this.state.isChecked;return a.a.createElement("div",null,a.a.createElement("img",{src:t.images[t.images.length-1]&&t.images[t.images.length-1].url,alt:"cover",height:60,width:60}),t.name,a.a.createElement("input",{type:"checkbox",checked:n,onChange:function(t){return e.handleChange(t)}}))}},{key:"handleChange",value:function(e){var t=this.props,n=t.handelSelectedPlaylists,r=t.playlist;this.setState((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isChecked:!e.isChecked})})),n(r,e.target.checked)}}]),t}(a.a.PureComponent);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(y.a)(t).call(this,e))).state={name:""},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props,n=t.playlists,r=t.spotifyService,c=this.state.name;return a.a.createElement("div",null,a.a.createElement("p",null,"Name of the combined playlist:"),a.a.createElement("input",{type:"text",placeholder:"Playlist name",value:c,onChange:function(t){var n=t.target.value;e.setState((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:n})}))}}),a.a.createElement("p",null,"Selected playlists:"),n&&n.map((function(e,t){return a.a.createElement("p",{key:t},e.name)})),a.a.createElement("button",{onClick:function(){return r.createCombinedPlaylist(n,c)},disabled:!c},"Create combined playlist"))}}]),t}(a.a.PureComponent),g=n(11),j=n.n(g),k=function(){function e(){var t=this;Object(p.a)(this,e),this.spotifyApi=void 0,this.userId=void 0,this.createCombinedPlaylist=function(){var e=Object(u.a)(o.a.mark((function e(n,r){var a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.spotifyApi.createPlaylist(t.userId,{name:r,description:"This playlist is a combination of:".concat(n.map((function(e){return' "'.concat(e.name,'"')})).toString())});case 2:return a=e.sent,console.log(a),e.next=6,t.getUniqueTracks(n);case 6:return c=e.sent,i=c.map((function(e){return e.uri})),e.next=10,t.addTracks(a.id,i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addTracks=function(){var e=Object(u.a)(o.a.mark((function e(n,r){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<r.length/99)){e.next=9;break}return c=r.slice(99*a,99*(a+1)),console.log(c),e.next=6,t.spotifyApi.addTracksToPlaylist(n,c);case 6:a++,e.next=1;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getUniqueTracks=function(){var e=Object(u.a)(o.a.mark((function e(n){var r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=0;case 2:if(!(a<n.length)){e.next=11;break}return e.t0=r,e.next=6,t.getPlaylistTracks(n[a]);case 6:e.t1=e.sent,r=e.t0.concat.call(e.t0,e.t1);case 8:a++,e.next=2;break;case 11:return c=r.map((function(e){return e.track})),i=c.filter((function(e,t,n){return n.findIndex((function(t){return t.id===e.id}))===t})),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(f.a)(e,[{key:"getPlaylists",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(u.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.spotifyApi.getUserPlaylists(r.userId,{limit:50,offset:n});case 2:if(!((a=e.sent).items.length<50)){e.next=7;break}e.t0=a.items,e.next=12;break;case 7:return e.t1=a.items,e.next=10,t(n+50);case 10:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2);case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t(0);case 3:return n=e.sent,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPlaylistTracks",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(u.a)(o.a.mark((function e(t,r){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.spotifyApi.getPlaylistTracks(t.id,{offset:r,limit:100});case 2:if(!((c=e.sent).items.length<100)){e.next=7;break}e.t0=c.items,e.next=12;break;case 7:return e.t1=c.items,e.next=10,n(t,r+100);case 10:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2);case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=3,n(t,0);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"create",value:function(){var t=Object(u.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new e).spotifyApi=new j.a,r.spotifyApi.setAccessToken(n),t.next=5,r.spotifyApi.getMe();case 5:return a=t.sent,r.userId=a.id,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(h.a)(this,Object(y.a)(t).call(this,{}))).spotifyService=void 0,e.handelSelectedPlaylists=function(t,n){var r=e.state.selectedPlaylists;n?r.push(t):r.splice(r.indexOf(t),1),e.setState((function(e){return w({},e,{selectedPlaylists:r})})),e.forceUpdate()},e.getHashParams=function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);e=n.exec(r);)t[e[1]]=decodeURIComponent(e[2]);return t},e.state={isLoggedin:!1,playlists:[],selectedPlaylists:[]},e}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getHashParams()).access_token){e.next=9;break}return e.next=4,k.create(t.access_token);case 4:return this.spotifyService=e.sent,e.next=7,this.spotifyService.getPlaylists();case 7:n=e.sent,this.setState((function(e){return w({},e,{isLoggedin:!0,playlists:n})}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoggedin,r=t.playlists,c=t.selectedPlaylists;return a.a.createElement("div",{className:"PlaylistCombiner"},a.a.createElement("h1",null,"Spotify Playlist Combiner"),!n&&a.a.createElement("a",{href:"http://localhost:8888/login"},a.a.createElement("button",null,"Login with Spotify")),a.a.createElement(O,{playlists:c,spotifyService:this.spotifyService}),a.a.createElement("br",null),r&&r.map((function(t,n){return a.a.createElement(m,{playlist:t,key:n,handelSelectedPlaylists:e.handelSelectedPlaylists})})))}}]),t}(a.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.d0284529.chunk.js.map