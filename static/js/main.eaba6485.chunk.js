(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,n){e.exports={combinedPlaylist:"CombinedPlaylist_combinedPlaylist__3I4Dw",msg1:"CombinedPlaylist_msg1__dptA-",fadeInOut:"CombinedPlaylist_fadeInOut__7Pg1b",msg2:"CombinedPlaylist_msg2__m1jtg"}},15:function(e,t,n){e.exports=n(22)},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(13),i=n.n(s),c=(n(20),n(1)),l=n.n(c),o=n(2),u=n(10),p=n(3),f=n(4),y=n(6),m=n(5),h=n(7),b=n(9),d=n.n(b),v=function(e){function t(){return Object(p.a)(this,t),Object(y.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.playlist,a=t.isChecked;return r.a.createElement("div",{className:d.a.playlistRow},r.a.createElement("div",{className:d.a.leftWrapper},r.a.createElement("input",{type:"checkbox",checked:a,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("img",{src:n.images[n.images.length-1]&&n.images[n.images.length-1].url,alt:"cover",height:60,width:60}),r.a.createElement("div",{className:d.a.textWrapper},r.a.createElement("h5",null,n.name),r.a.createElement("div",{className:d.a.subInfo},r.a.createElement("p",null,"By ",n.owner.display_name," "),r.a.createElement("p",null,n.tracks.total," tracks")))))}},{key:"handleChange",value:function(e){var t=this.props;(0,t.handelSelectedPlaylists)(t.playlist,e.target.checked)}}]),t}(r.a.PureComponent),g=n(11),w=n.n(g);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(y.a)(this,Object(m.a)(t).call(this,e))).onCreatePlaylistClick=function(){var e=n.props,t=e.spotifyService,a=e.playlists,r=e.clearSelection,s=n.state.name;t.createCombinedPlaylist(a,s),r(),n.setState((function(e){return P({},e,{showSuccessMsg:!0,name:""})})),setTimeout((function(){n.setState((function(e){return P({},e,{showSuccessMsg:!1})}))}),2e3)},n.state={name:"",showSuccessMsg:!1},n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props.playlists,n=this.state,a=n.name,s=n.showSuccessMsg;return r.a.createElement("div",{className:w.a.combinedPlaylist},r.a.createElement("b",null,"Name of the combined playlist:"),r.a.createElement("input",{type:"text",placeholder:"Playlist name",value:a,onChange:function(t){var n=t.target.value;e.setState((function(e){return P({},e,{name:n})}))}}),r.a.createElement("p",null,"Selected playlists:"),r.a.createElement("ul",null,t&&t.map((function(e,t){return r.a.createElement("li",{key:t},e.name)}))),r.a.createElement("button",{onClick:function(){return e.onCreatePlaylistClick()},disabled:!a||0===t.length},"Create combined playlist"),r.a.createElement("h5",{className:s?w.a.msg1:w.a.msg2},"Created Playlist!"))}}]),t}(r.a.PureComponent),j=n(14),x=n.n(j),_=function(){function e(){var t=this;Object(p.a)(this,e),this.spotifyApi=void 0,this.userId=void 0,this.createCombinedPlaylist=function(){var e=Object(o.a)(l.a.mark((function e(n,a){var r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.spotifyApi.createPlaylist(t.userId,{name:a,description:"This playlist is a combination of:".concat(n.map((function(e){return' "'.concat(e.name,'"')})).toString())});case 2:return r=e.sent,e.next=5,t.getUniqueTracks(n);case 5:return s=e.sent,i=s.map((function(e){return e.uri})),e.next=9,t.addTracks(r.id,i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.addTracks=function(){var e=Object(o.a)(l.a.mark((function e(n,a){var r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=a.filter((function(e){return!e.includes("local")})),r=0;case 2:if(!(r<a.length/99)){e.next=9;break}return s=a.slice(99*r,99*(r+1)),e.next=6,t.spotifyApi.addTracksToPlaylist(n,s);case 6:r++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getUniqueTracks=function(){var e=Object(o.a)(l.a.mark((function e(n){var a,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=0;case 2:if(!(r<n.length)){e.next=11;break}return e.t0=a,e.next=6,t.getPlaylistTracks(n[r]);case 6:e.t1=e.sent,a=e.t0.concat.call(e.t0,e.t1);case 8:r++,e.next=2;break;case 11:return s=a.map((function(e){return e.track})),i=s.filter((function(e,t,n){return n.findIndex((function(t){return t.id===e.id}))===t})),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(f.a)(e,[{key:"getPlaylists",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(o.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.spotifyApi.getUserPlaylists(a.userId,{limit:50,offset:n});case 2:if(!((r=e.sent).items.length<50)){e.next=7;break}e.t0=r.items,e.next=12;break;case 7:return e.t1=r.items,e.next=10,t(n+50);case 10:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2);case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t(0);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPlaylistTracks",value:function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(o.a)(l.a.mark((function e(t,a){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.spotifyApi.getPlaylistTracks(t.id,{offset:a,limit:100});case 2:if(!((s=e.sent).items.length<100)){e.next=7;break}e.t0=s.items,e.next=12;break;case 7:return e.t1=s.items,e.next=10,n(t,a+100);case 10:e.t2=e.sent,e.t0=e.t1.concat.call(e.t1,e.t2);case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=3,n(t,0);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"create",value:function(){var t=Object(o.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new e).spotifyApi=new x.a,a.spotifyApi.setAccessToken(n),t.next=5,a.spotifyApi.getMe();case 5:return r=t.sent,a.userId=r.id,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}(),C=n(8),S=n.n(C);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){function t(){var e;Object(p.a)(this,t),(e=Object(y.a)(this,Object(m.a)(t).call(this,{}))).spotifyService=void 0,e.clearSelection=function(){console.log("this.clearSelection"),e.setState((function(e){return I({},e,{selectedPlaylists:[],filter:""})}))},e.handelSelectedPlaylists=function(t,n){var a=e.state.selectedPlaylists;n?a.push(t):a.splice(a.indexOf(t),1),e.setState((function(e){return I({},e,{selectedPlaylists:a})})),e.forceUpdate()},e.getHashParams=function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);e=n.exec(a);)t[e[1]]=decodeURIComponent(e[2]);return t};var n=e.getHashParams().access_token&&!0;return e.state={isLoggedin:n,playlists:[],selectedPlaylists:[],filter:""},e}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getHashParams()).access_token){e.next=9;break}return e.next=4,_.create(t.access_token);case 4:return this.spotifyService=e.sent,e.next=7,this.spotifyService.getPlaylists();case 7:n=e.sent,this.setState((function(e){return I({},e,{isLoggedin:!0,playlists:n})}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoggedin,a=t.playlists,s=t.selectedPlaylists,i=t.filter;return n?r.a.createElement("div",{className:S.a.playlistCombiner},r.a.createElement("h1",null,"Spotify Playlist Combiner"),r.a.createElement("p",null,"This site allows you to create Spotify playlist by combining playlists, which you are already following."),r.a.createElement("div",{className:S.a.horWraper},r.a.createElement("div",{className:S.a.playlistRows},r.a.createElement("p",null,"Select playlists you want to combine"),"Filter:",r.a.createElement("input",{type:"text",value:i,onChange:function(t){var n=t.target.value;e.setState((function(e){return I({},e,{filter:n})}))}}),a.length>0?a.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())||e.owner.display_name.toLowerCase().includes(i.toLowerCase())})).map((function(t,n){return r.a.createElement(v,{playlist:t,key:n,isChecked:s.includes(t),handelSelectedPlaylists:e.handelSelectedPlaylists})})):"loading playlists..."),r.a.createElement(k,{playlists:s,spotifyService:this.spotifyService,clearSelection:this.clearSelection}))):r.a.createElement("div",{className:S.a.playlistCombiner},r.a.createElement("h1",null,"Spotify Playlist Combiner"),r.a.createElement("p",null,"This site allows you to create Spotify playlist by combining playlists, which you are already following."),r.a.createElement("a",{className:S.a.loginButton,href:"https://spotify-playlist-combiner-serv.herokuapp.com/login"},r.a.createElement("button",null,"Login with Spotify")))}}]),t}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports={playlistCombiner:"PlaylistCombiner_playlistCombiner__ExKLk",loginButton:"PlaylistCombiner_loginButton__2rRRL",horWraper:"PlaylistCombiner_horWraper__2f34f",playlistRows:"PlaylistCombiner_playlistRows__23_Bv"}},9:function(e,t,n){e.exports={playlistRow:"PlaylistRow_playlistRow__o8p6w",leftWrapper:"PlaylistRow_leftWrapper__18Ymn",textWrapper:"PlaylistRow_textWrapper__raaQx",subInfo:"PlaylistRow_subInfo__3CISa"}}},[[15,1,2]]]);
//# sourceMappingURL=main.eaba6485.chunk.js.map